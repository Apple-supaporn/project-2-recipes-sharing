<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <title>SpiceMe | Recipe Details</title>
</head>
<body>
    <%- include('./partials/header') %>
    <div class="recipe-showpage-container">
        <div class="recipe-showpage-card">
            <div class="recipe-showpage-column"><br>

                <!-- EDIT FORM  -->
                <a href="/recipes/<%= recipe.id %>/edit">Edit Recipe</a>


                <!-- DELETE FORM -->
            <form id="delete-form" action="/recipes/<%= recipe.id %>?_method=DELETE" method="POST">
                <input type="hidden" name="recipeId" value="<%= recipe.id %>">
                <!-- <input type="submit" value="DELETE THIS RECIPE"> -->
            </form>

            <button id="delete-button">DELETE THIS RECIPE</button>

            <!-- Pop-up -->
            <div class="popup-overlay" id="popup-overlay">
                <div class="popup-content">
                    <p>Are you sure you want to delete this recipe?</p>
                    <div class="popup-buttons">
                        <button onclick="deleteRecipe();">Confirm</button>
                        <button onclick="closePopup();">Cancel</button>
                    </div>
                </div>
            </div>

                <img class="recipe-showpage-image" src="<%= recipe.img %>" alt="<%= recipe.title %>"><br>
                <h2><%= recipe.title %><br></h2>
                <%= recipe.description %><br><br>
                Cuisine Type: <%= recipe.cuisine_type %><br>
                Prep Time: <%= recipe.prep_time %><br>
                Cook Time: <%= recipe.cook_time %><br>
                Total Time: <%= recipe.total_time %><br>
                Servings: <%= recipe.servings_amount %><br><br>
                Ingredients: <%= recipe.ingredients %><br><br>
                Instructions: <%= recipe.instructions %><br><br><br>
                <a href="/recipes">Back to Recipes Index</a>
            </div>
        </div>
    </div>

    <script>
        function showPopup() {
            document.getElementById('popup-overlay').style.display = 'flex';
        }
    
        function closePopup() {
            document.getElementById('popup-overlay').style.display = 'none';
        }
    
        function deleteRecipe() {
            document.getElementById('delete-form').submit();
        }
    
        document.getElementById('delete-button').addEventListener('click', function() {
            showPopup();
        });
    </script>
</body>
</html>